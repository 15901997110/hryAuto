<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haier.mapper.TenvdetailCustomMapper">
    <resultMap id="TenvdetailCustomResultMap" type="com.haier.po.TenvdetailCustom">
        <result column="serviceid" property="serviceid"></result>
        <result column="envid" property="envid"></result>
        <result column="hostinfo" property="hostinfo"></result>
        <result column="dbinfo" property="dbinfo"></result>
        <result column="servicekey" property="servicekey"/>
        <result column="servicename" property="servicename"/>
        <result column="envkey" property="envkey"/>
        <result column="remark" property="envremark"/>
    </resultMap>
    <select id="selectByCondition" parameterType="com.haier.po.TenvdetailCustom"
            resultMap="TenvdetailCustomResultMap">
        SELECT
        tenvdetail.`serviceId`,
        tservice.`serviceKey`,
        tservice.`serviceName`,
        tenvdetail.`envId`,
        tenv.`envKey`,
        tenv.`remark`,
        tenvdetail.`hostInfo`,
        tenvdetail.`dbInfo`
        FROM tenvdetail
        INNER JOIN tservice ON tenvdetail.`serviceId` = tservice.`id` AND tservice.`isDel` = 0
        INNER JOIN tenv ON tenvdetail.`envId` = tenv.`id`
        WHERE 1=1
        <if test="_parameter!=null">
            <if test="serviceid!=null and serviceid!=0">
                AND tenvdetail.serviceId=#{serviceid}
            </if>
            <if test="envid!=null and envid!=0">
                AND tenvdetail.envId=#{envid}
            </if>
            <if test="servicekey!=null and servicekey!=''">
                AND (tservice.serviceKey like #{servicekey} or tservice.serviceName like #{servicekey})
            </if>
            <if test="envkey!=null and envkey!=''">
                AND (tenv.envKey like #{envkey} or tenv.remark like #{envkey})
            </if>
            <if test="hostinfo!=null and hostinfo!=''">
                AND tenvdetail.hostInfo like #{hostinfo}
            </if>
            <if test="dbinfo!=null and dbinfo !=''">
                AND tenvdetail.dbInfo like #{dbinfo}
            </if>
        </if>
    </select>

</mapper>